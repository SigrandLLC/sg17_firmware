<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Настройка моста</title><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="Руководство по эксплуатации мультиплексора ГМ-2-MPR"><link rel="up" href="ifaces.html" title="Динамические интерфейсы"><link rel="prev" href="bonding.html" title="Настройка режима Bonding"><link rel="next" href="pptp.html" title="Настройка соединения PPtP"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Настройка моста</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="bonding.html">Пред.</a> </td><th width="60%" align="center">Динамические интерфейсы</th><td width="20%" align="right"> <a accesskey="n" href="pptp.html">След.</a></td></tr></table><hr></div><div class="section" lang="ru"><div class="titlepage"><div><div><h3 class="title"><a name="bridge"></a>Настройка моста</h3></div></div></div><p>
					Работа мультиплексора в режиме моста (bridging) позволяет прозрачно передавать трафик между интерфейсами, имитируя работу коммутатора. Для этого создается специальный сетевой динамический интерфейс с именем <span class="emphasis"><em>br</em></span>, с которым ассоциируются сетевые интерфейсы, между которыми будет передаваться трафик.
				</p><div class="figure"><a name="id2524763"></a><p class="title"><b>Рисунок 3.27. Пример моста</b></p><div><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="540"><tr><td><img src="img/bridge.png" width="540" alt="Пример моста"></td></tr></table></div></div><p>
					В приведенном выше рисунке мост состоит из двух интерфейсов - Ethernet-интерфейса eth0 и SHDSL-интерфейса dsl0 - и объединяет в одну сеть компьютеры PC1 и PC2.
				</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Замечание</h3><p>
						Следует заметить, что мультиплексор, работающий в режиме моста и сети, между которыми он передаёт трафик, не обязательно должны находиться в одном адресном пространстве, как это требуется при настройке маршрутизации трафика.
					</p><p>
						Более того, у такого мультиплексора вообще может не быть IP-адреса. Однако, если необходимо управление мультиплексором, то ему необходимо назначить IP-адрес, входящий в ту же сеть, что и компьютер, с которого будет производиться управление. В нашем примере, мультиплексорам можно назначить IP-адреса 192.168.90.10 и 192.168.90.11.
					</p></div><p>
					На следующем рисунке изображена сеть, аналогичная предыдущий, но с использованием технологии объединения каналов (bonding), позволяющей увеличить производительность сети. В этом случае мост состоит из Ethernet-интерфейса eth0 и объединенных SHDSL-интерфейсов dsl0 и dsl1 в один интерфейс bond0:
				</p><div class="figure"><a name="id2524835"></a><p class="title"><b>Рисунок 3.28. Пример моста с объединением интерфейсов</b></p><div><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="540"><tr><td><img src="img/bridge+bonding.png" width="540" alt="Пример моста с объединением интерфейсов"></td></tr></table></div></div><p>
					Так же, как и для настройки режима Bonding, в первую очередь необходимо настроить физические интерфейсы, которые будут входить в мост: они должны быть активны и запущены (см. <a href="iface.html#iface.common">настройку сетевых интерфейсов</a>). Для интерфейсов должен быть установлен флажок <span class="emphasis"><em>enabled</em></span>, т.е. их конфигурация должна иметь следующий вид:
				</p><div class="figure"><a name="id2524883"></a><p class="title"><b>Рисунок 3.29. Настройка физического интерфейса</b></p><div><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="540"><tr><td><img src="img/bond-real-iface.png" width="540" alt="Настройка физического интерфейса"></td></tr></table></div></div><p>
					Создание интерфейса происходит на странице Network/Interfaces, на которой в меню Add dynamic interface надо выбрать в качестве протокола Bridge:
				</p><div class="figure"><a name="id2524911"></a><p class="title"><b>Рисунок 3.30. Создание интерфейса</b></p><div><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="540"><tr><td><img src="img/bridge-add.png" width="540" alt="Создание интерфейса"></td></tr></table></div></div><p>
					После добавления интерфейса он появится в списке сетевых интерфейсов. Для его настройки перейдём на страницу Network/Interfaces/br* и выберем вкладку General, на которой установим флажки <span class="emphasis"><em>enabled</em></span> и <span class="emphasis"><em>auto</em></span> для автоматического запуска интерфейса во время загрузки мультиплексора:
				</p><div class="figure"><a name="id2524952"></a><p class="title"><b>Рисунок 3.31. Конфигурация динамического интерфейса</b></p><div><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="540"><tr><td><img src="img/bridge-general.png" width="540" alt="Конфигурация динамического интерфейса"></td></tr></table></div></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Важно</h3><p>
						Если динамический интерфейс <span class="emphasis"><em>br*</em></span> включает в себя другой динамический интерфейс - например, <span class="emphasis"><em>bond*</em></span> - то надо указать, что данный интерфейс зависит от другого интерфейса (как показано в приведённом выше примере).
					</p></div><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Замечание</h3><p>
						Если для динамического интерфейса необходимо назначить IP-адрес, то в параметре <span class="emphasis"><em>Method</em></span> надо выбрать необходимый метод установки IP-адреса и произвести его настройку (в случае статического IP-адреса - прописать адрес на вкладке <span class="emphasis"><em>Method</em></span>).
					</p></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Важно</h3><p>
						Если для интерфейса выставлен флажок <span class="emphasis"><em>enabled</em></span>, то после сохранения настроек (на вкладках, отличных от General) - интерфейс будет запущен. Запуск интерфейса <span class="emphasis"><em>br*</em></span> приводит к сбросу IP-адресов с физических интерфейсов, которые в него входят. Таким образом, если настройка осуществляется через физический интерфейс, который входит в мост, управление над мультиплексором может быть потеряно. Чтобы этого избежать, необходимо назначить динамическому интерфейсу <span class="emphasis"><em>br*</em></span> IP-адрес.
					</p></div><p>
					Следующим шагом настройки является определение списка интерфейсов, входящих в мост. Для этого перейдем на вкладку Specific, где в поле Interfaces укажем имена сетевых интерфейсов, из которых будет состоять мост:
				</p><div class="figure"><a name="id2525073"></a><p class="title"><b>Рисунок 3.32. Привязка к физическим интерфейсам</b></p><div><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="540"><tr><td><img src="img/bridge-specific.png" width="540" alt="Привязка к физическим интерфейсам"></td></tr></table></div></div><p>
					Эту же процедуру повторяем на втором мультиплексоре, и через пару минут, в течении которых "мост" распознает топологию сети и проведет небольшой этап самообучения, начнется передача пакетов между интерфейсами.
				</p></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="bonding.html">Пред.</a> </td><td width="20%" align="center"><a accesskey="u" href="ifaces.html">Уровень выше</a></td><td width="40%" align="right"> <a accesskey="n" href="pptp.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Настройка режима Bonding </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> Настройка соединения PPtP</td></tr></table></div></body></html>
