<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Глава 6. Мультиплексирование</title><meta name="generator" content="DocBook XSL Stylesheets V1.68.1"><link rel="start" href="index.html" title="Руководство по эксплуатации мультиплексора ГМ-2-MPR"><link rel="up" href="index.html" title="Руководство по эксплуатации мультиплексора ГМ-2-MPR"><link rel="prev" href="htb.html" title="Классовая дисциплина HTB"><link rel="next" href="ch06s02.html" title="Примеры конфигурации"></head><body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="navheader"><table width="100%" summary="Navigation header"><tr><th colspan="3" align="center">Глава 6. Мультиплексирование</th></tr><tr><td width="20%" align="left"><a accesskey="p" href="htb.html">Пред.</a> </td><th width="60%" align="center"> </th><td width="20%" align="right"> <a accesskey="n" href="ch06s02.html">След.</a></td></tr></table><hr></div><div class="chapter" lang="ru"><div class="titlepage"><div><div><h2 class="title"><a name="multiplexing"></a>Глава 6. Мультиплексирование</h2></div></div></div><div class="toc"><p><b>Содержание</b></p><dl><dt><span class="section"><a href="multiplexing.html#id2527882">Конфигурация</a></span></dt><dt><span class="section"><a href="ch06s02.html">Примеры конфигурации</a></span></dt></dl></div><div class="section" lang="ru"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a name="id2527882"></a>Конфигурация</h2></div></div></div><p>
				Мультиплексирование используется для передачи трафика с одного интерфейса на другой, минуя центральный процессор. <span class="emphasis"><em>ГМ-2-MPR</em></span> позволяет одновременно мультиплексировать и маршрутизировать сетевой трафик.
			</p><p>
				В общем виде это можно представить так:
			</p><div class="figure"><a name="id2527913"></a><p class="title"><b>Рисунок 6.1. Схема сети</b></p><div><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="540"><tr><td><img src="img/multiplexing1.png" width="540" alt="Схема сети"></td></tr></table></div></div><p>
				В приведенном примере к мультиплексорам ГМ-2-MPR подключено два канала Е1, а так же сеть TCP/IP по Ethernet. Два мультиплексора соединены между собой через SHDSL. Максимальная скорость SHDSL составляет 5696 кбит/c, т.е. по одному каналу SHDSL можно передать два канала Е1 (2048 кбит/с каждый), и останется неиспользованными 1600 кбит/с.
			</p><p>
				Для передачи потоков Е1 используется мультиплексирование: оба входных потока Е1 мультиплексируются в канал SHDSL, по которому они передаются на второй мультиплексор, где происходит демультиплексирование, и потоки расходятся к клиентам. Оставшаяся полоса SHDSL используется для передачи TCP/IP трафика между двумя Ethernet сетями.
			</p><p>
				Для мультиплексирования в мультиплексоре выделена шина, состоящая из 16 линий, каждая из которых содержит 256 тайм-слотов. Каждый тайм-слот на линии соответствует тайм-слоту в Е1 или SHDSL, т.е. имеет скорость 64 кбит/с. E1 содержит 32 тайм-слота, SHDSL - 89 тайм-слотов. Интерфейсы E1 (hdlc) и SHDSL (dsl) могут выставлять на нее данные, полученные из физической линии, и принимать данные, выставленные другим интерфейсом.
			</p><div class="figure"><a name="id2527983"></a><p class="title"><b>Рисунок 6.2. Физическая организация мультиплексирования</b></p><div><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="540"><tr><td><img src="img/multiplexing-line.png" width="540" alt="Физическая организация мультиплексирования"></td></tr></table></div></div><p>
				Все устройства, участвующие в мультиплексировании трафика, должны тактироваться одним сигналом. Для этого при настройке мультиплексирования необходимо указать, какой интерфейс будет задавать тактовый сигнал на линию мультиплексирования.
			</p><p>
				мультиплексор может иметь два задающих источника синхросигнала для мультиплексирования, каждый из которых определяет <span class="emphasis"><em>домен</em></span>. Каждая линия относится либо к домену А, либо к домену В, соответственно, все интерфейсы, относящиеся к этой линии, так же относятся либо к домену А, либо к В. Задающий синхросигнал можно использовать либо локальный, либо удаленный.
			</p><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Важно</h3><p>
					В одном домене должно быть одно и только одно устройство (интерфейс), задающее тактовый сигнал! Все остальные устройства домена должны быть установлены в режим <span class="emphasis"><em>clock slave</em></span>. Таким образом, от одного устройства тактируются все устройства, находящиеся в данном домене.
				</p></div><p>
				Для настройки мультиплексирования задаются следующие параметры (для каждого интерфейса, участвующего в мультиплексировании):
			</p><div class="itemizedlist"><ul type="disc"><li><p><span class="emphasis"><em>rline - </em></span>номер линии, на которую интерфейс будет выставлять данные, полученные из физической линии</p></li><li><p><span class="emphasis"><em>rfs - </em></span>номер тайм-слота линии, начиная с которого на нее выставляются данные этим интерфейсом</p></li><li><p><span class="emphasis"><em>tline - </em></span>номер линии, с которой данный интерфейс забирает данные (выставленные другим интерфейсом, участвующим в мультиплексировании) для передачи в физическую линию</p></li><li><p><span class="emphasis"><em>tfs - </em></span>номер тайм-слота линии, начиная с которого с нее забираются данные</p></li><li><p><span class="emphasis"><em>mxrate - </em></span>число тайм-слотов, отводимых для  мультиплексирования (для интерфейсов SHDSL)</p></li><li><p><span class="emphasis"><em>mxsmap - </em></span>карта слотов, используемых для мультиплексирования (для интерфейсов Е1). Эта карта не должна пересекаться с картой, которая задается при конфигурации интерфейса Е1 для передачи IP трафика. Задается в виде "1-16", "16-31", ...</p></li><li><p><span class="emphasis"><em>clkm - </em></span>если 1, устройство является источником синхронизации для данного домена, если 0 -  приемником</p></li><li><p><span class="emphasis"><em>clkab - </em></span>0 - устройство принадлежит домену А, 1 - к домену B</p></li><li><p><span class="emphasis"><em>clkr - </em></span>1 - использовать для тактирования внешний клок, 0 - использовать для тактирования локальный клок</p></li><li><p><span class="emphasis"><em>mxen - </em></span>1 - устройство принимает участие в мультиплексировании, 0 - устройство используется только для IP трафика</p></li></ul></div><div class="important" style="margin-left: 0.5in; margin-right: 0.5in;"><h3 class="title">Важно</h3><p>
					Тайм-слот в Е1 может использоваться <span class="emphasis"><em>только</em></span> либо для мультиплексирования, либо для маршрутизации, поэтому карта тайм-слотов, задаваемых для мультиплексирования параметром <em class="parameter"><code>mxsmap</code></em> не должна пересекаться с картой тайм-слотов, указанных при конфигурации Е1 для использования в передаче IP-трафика.
				</p></div><p>
				Настройка мультиплексирования выполняется на странице System/Multiplexing:
			</p><div class="figure"><a name="id2528234"></a><p class="title"><b>Рисунок 6.3. Конфигурация мультиплексирования</b></p><div><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="540"><tr><td><img src="img/mux-web.png" width="540" alt="Конфигурация мультиплексирования"></td></tr></table></div></div><p>
				Если при конфигурации были допущены ошибки, будет показана диагностическая информация:
			</p><pre class="screen">
			Checking status:
			Errors detected:
				
			WARNING: Line2: timeslots 45 written but not read
			WARNING: Line3: timeslots 55 read but not written
			</pre></div></div><div class="navfooter"><hr><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="htb.html">Пред.</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="ch06s02.html">След.</a></td></tr><tr><td width="40%" align="left" valign="top">Классовая дисциплина HTB </td><td width="20%" align="center"><a accesskey="h" href="index.html">Начало</a></td><td width="40%" align="right" valign="top"> Примеры конфигурации</td></tr></table></div></body></html>
